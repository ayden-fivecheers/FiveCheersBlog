{"ast":null,"code":"import { createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-cd5fca7a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"new-video-container\"\n};\nconst _hoisted_2 = {\n  class: \"card-container\"\n};\nconst _hoisted_3 = {\n  class: \"btns-line\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_upload = _resolveComponent(\"a-upload\");\n  const _component_a_textarea = _resolveComponent(\"a-textarea\");\n  return _openBlock(), _createBlock(_Transition, {\n    name: \"fade\"\n  }, {\n    default: _withCtx(() => [$setup.newVideoShow ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_a_upload, {\n      action: \"https://www.yym-free.com/wz/file/defaultUpLoadFile\",\n      onChange: $setup.handleUploadChange\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        style: {\n          \"margin-top\": \"8px\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"UploadOutlined\"]), _createTextVNode(\" 上传单个视频、图片或文件 \")]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_textarea, {\n      placeholder: \"输入简述\",\n      style: {\n        \"width\": \"240px\"\n      },\n      \"auto-size\": {\n        minRows: 3,\n        maxRows: 5\n      },\n      value: $setup.newVideo.videoContent,\n      \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.newVideo.videoContent = $event)\n    }, null, 8 /* PROPS */, [\"value\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: $setup.insertNewVideoSure\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"确定\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_button, {\n      onClick: $setup.newVideoHide\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    })])])])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["key","class","_createBlock","_Transition","name","default","_withCtx","$setup","newVideoShow","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_a_upload","action","onChange","handleUploadChange","_component_a_button","style","_createTextVNode","_","_component_a_textarea","placeholder","minRows","maxRows","value","newVideo","videoContent","_cache","$event","_hoisted_3","type","onClick","insertNewVideoSure","newVideoHide","_createCommentVNode"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/coms/videos/NewVideoCom.vue"],"sourcesContent":["<script setup>\n\nimport {UploadOutlined} from \"@ant-design/icons-vue\";\nimport {message} from \"ant-design-vue\";\nimport {onMounted, ref} from \"vue\";\nimport {bus} from \"vue3-eventbus\";\nimport {insertNewVideo} from \"@/js/apihelper\";\n\nonMounted(()=>{\n  bus.on('newVideoShow', ()=>{\n    newVideoShow.value = true;\n  })\n})\nconst newVideoHide = ()=>{\n  newVideoShow.value = false\n  bus.emit('setCardShowingFalse')\n}\nconst newVideoShow = ref(false)\nconst newVideo = ref({\n  videoUrl:null,\n  videoContent: null\n})\nconst handleUploadChange = (info)=>{\n  if (info.file.status === 'done') {\n    message.success(`文件上传成功`);\n    newVideo.value.videoUrl = info.file.response\n  } else if (info.file.status === 'error') {\n    message.error(`${info.file.name} 文件上传失败`);\n  }\n}\nconst insertNewVideoSure = ()=>{\n  if (newVideo.value.videoContent && newVideo.value.videoUrl){\n    const postResult = insertNewVideo(newVideo.value)\n    postResult.then(response=>{\n      if (response.data){\n        message.success('添加成功')\n        newVideoHide()\n      }else{\n        message.error('添加失败')\n        console.log(response)\n      }\n    }).catch(e=>{\n      console.log(e)\n      message.error('添加失败')\n    })\n  }else {\n    message.warn('请先上传文件并填入简介')\n  }\n}\n\n</script>\n\n<template>\n  <transition name=\"fade\">\n    <div v-if=\"newVideoShow\" class=\"new-video-container\">\n      <div class=\"card-container\">\n        <a-upload\n            action=\"https://www.yym-free.com/wz/file/defaultUpLoadFile\"\n            @change=\"handleUploadChange\">\n          <a-button style=\"margin-top: 8px\">\n            <upload-outlined></upload-outlined>\n            上传单个视频、图片或文件\n          </a-button>\n        </a-upload>\n        <a-textarea placeholder=\"输入简述\" style=\"width: 240px\" :auto-size=\"{ minRows: 3, maxRows: 5 }\" v-model:value=\"newVideo.videoContent\"/>\n        <div class=\"btns-line\">\n          <a-button type=\"primary\" @click=\"insertNewVideoSure\">确定</a-button>\n          <a-button @click=\"newVideoHide\">取消</a-button>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<style scoped>\n  .new-video-container{\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #00000011;\n    backdrop-filter: blur(8px);\n  }\n  .card-container{\n    position: fixed;\n    top: 60px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 320px;\n    height: 320px;\n    box-shadow: 0 0 12px #00000044;\n    background-color: #ffffff;\n    backdrop-filter: blur(8px);\n    border-radius: 8px;\n    animation: topDropAni .8s 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    flex-direction: column;\n    padding: 28px 20px 20px 20px;\n  }\n  .btns-line{\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n  }\n</style>"],"mappings":";;;EAAAA,GAAA;EAsD6BC,KAAK,EAAC;;;EACxBA,KAAK,EAAC;AAAgB;;EAUpBA,KAAK,EAAC;AAAW;;;;;uBAZ5BC,YAAA,CAkBaC,WAAA;IAlBDC,IAAI,EAAC;EAAM;IArDzBC,OAAA,EAAAC,QAAA,CAsDI,MAgBM,CAhBKC,MAAA,CAAAC,YAAY,I,cAAvBC,mBAAA,CAgBM,OAhBNC,UAgBM,GAfJC,mBAAA,CAcM,OAdNC,UAcM,GAbJC,YAAA,CAOWC,mBAAA;MANPC,MAAM,EAAC,oDAAoD;MAC1DC,QAAM,EAAET,MAAA,CAAAU;;MA1DrBZ,OAAA,EAAAC,QAAA,CA2DU,MAGW,CAHXO,YAAA,CAGWK,mBAAA;QAHDC,KAAuB,EAAvB;UAAA;QAAA;MAAuB;QA3D3Cd,OAAA,EAAAC,QAAA,CA4DY,MAAmC,CAAnCO,YAAA,CAAmCN,MAAA,qBA5D/Ca,gBAAA,CA4D+C,gBAErC,E;QA9DVC,CAAA;;MAAAA,CAAA;QAgEQR,YAAA,CAAmIS,qBAAA;MAAvHC,WAAW,EAAC,MAAM;MAACJ,KAAoB,EAApB;QAAA;MAAA,CAAoB;MAAE,WAAS,EAAE;QAAAK,OAAA;QAAAC,OAAA;MAAA,CAA0B;MAAUC,KAAK,EAAEnB,MAAA,CAAAoB,QAAQ,CAACC,YAAY;MAhExI,kBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAgEmHvB,MAAA,CAAAoB,QAAQ,CAACC,YAAY,GAAAE,MAAA;wCAChInB,mBAAA,CAGM,OAHNoB,UAGM,GAFJlB,YAAA,CAAkEK,mBAAA;MAAxDc,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAE1B,MAAA,CAAA2B;;MAlE3C7B,OAAA,EAAAC,QAAA,CAkE+D,MAAE,CAlEjEc,gBAAA,CAkE+D,IAAE,E;MAlEjEC,CAAA;QAmEUR,YAAA,CAA6CK,mBAAA;MAAlCe,OAAK,EAAE1B,MAAA,CAAA4B;IAAY;MAnExC9B,OAAA,EAAAC,QAAA,CAmE0C,MAAE,CAnE5Cc,gBAAA,CAmE0C,IAAE,E;MAnE5CC,CAAA;gBAAAe,mBAAA,e;IAAAf,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}