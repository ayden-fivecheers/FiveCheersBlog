{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { HomeOutlined, PlusOutlined } from '@ant-design/icons-vue';\nimport { jumphelper } from \"@/js/jumphelper\";\nimport NewVideoCom from \"@/coms/videos/NewVideoCom.vue\";\nimport { bus } from \"vue3-eventbus\";\nimport { onMounted, ref } from \"vue\";\nimport { deleteVideoApi, selectVideos } from \"@/js/apihelper\";\nimport { message } from \"ant-design-vue\";\nimport { timeCorrect } from \"@/js/jshelper\";\nexport default {\n  __name: 'PhoneMyVideosDeep',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const newVideoShow = () => {\n      bus.emit('newVideoShow');\n      cardShowing.value = true;\n    };\n    const videoList = ref([]);\n    const currentProps = ref({\n      firstIndex: 0,\n      length: 3\n    });\n    const pushVideos = () => {\n      const getResults = selectVideos(currentProps.value);\n      getResults.then(response => {\n        if (response.data.length > 0) {\n          for (const datum of response.data) {\n            const tmp = datum;\n            tmp.time = timeCorrect(datum.time);\n            if (tmp.videoUrl && tmp.videoUrl.endsWith('.mp4') || tmp.videoUrl.endsWith('.avi') || tmp.videoUrl.endsWith('.mov')) {\n              tmp.isVideo = true;\n            }\n            videoList.value.push(tmp);\n          }\n          currentProps.value.firstIndex += currentProps.value.length;\n        } else {\n          message.warn('后面没有了');\n        }\n      }).catch(e => {\n        console.log(e);\n        message.error('查询视频失败');\n      });\n    };\n    onMounted(() => {\n      if (localStorage.getItem('managerSecret') && localStorage.getItem('managerSecret') === 'nzt100years') {\n        isManager.value = true;\n      }\n      pushVideos();\n      bus.on('setCardShowingFalse', () => {\n        window.location.reload();\n      });\n    });\n    const deleteVideo = videoId => {\n      const postResult = deleteVideoApi(videoId);\n      postResult.then(response => {\n        if (response.data) {\n          message.success('删除成功');\n          videoList.value = videoList.value.filter(item => item.videoId !== videoId);\n        } else {\n          message.error('删除失败');\n          console.log(response);\n        }\n      }).catch(e => {\n        message.error('删除失败');\n        console.log(e);\n      });\n    };\n    const getOptions = videoUrl => {\n      return {\n        width: \"100%\",\n        //播放器宽度\n        height: \"auto\",\n        //播放器高度\n        color: \"#409eff\",\n        //主题色\n        title: \"\",\n        //视频名称\n        src: videoUrl,\n        //视频源\n        muted: false,\n        //静音\n        webFullScreen: false,\n        speedRate: [\"0.75\", \"1.0\", \"1.25\", \"1.5\", \"2.0\"],\n        //播放倍速\n        autoPlay: false,\n        //自动播放\n        loop: false,\n        //循环播放\n        mirror: false,\n        //镜像画面\n        ligthOff: false,\n        //关灯模式\n        volume: 0.3,\n        //默认音量大小\n        control: true,\n        //是否显示控制\n        controlBtns: [\"audioTrack\", \"quality\", \"speedRate\", \"volume\", \"setting\", \"pip\", \"pageFullScreen\", \"fullScreen\"] //显示所有按钮,\n      };\n    };\n    const downloadFile = fileUrl => {\n      window.location.href = fileUrl;\n    };\n    const cardShowing = ref(false);\n    const isManager = ref(false);\n    const __returned__ = {\n      newVideoShow,\n      videoList,\n      currentProps,\n      pushVideos,\n      deleteVideo,\n      getOptions,\n      downloadFile,\n      cardShowing,\n      isManager,\n      get HomeOutlined() {\n        return HomeOutlined;\n      },\n      get PlusOutlined() {\n        return PlusOutlined;\n      },\n      get jumphelper() {\n        return jumphelper;\n      },\n      NewVideoCom,\n      get bus() {\n        return bus;\n      },\n      onMounted,\n      ref,\n      get deleteVideoApi() {\n        return deleteVideoApi;\n      },\n      get selectVideos() {\n        return selectVideos;\n      },\n      get message() {\n        return message;\n      },\n      get timeCorrect() {\n        return timeCorrect;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["HomeOutlined","PlusOutlined","jumphelper","NewVideoCom","bus","onMounted","ref","deleteVideoApi","selectVideos","message","timeCorrect","newVideoShow","emit","cardShowing","value","videoList","currentProps","firstIndex","length","pushVideos","getResults","then","response","data","datum","tmp","time","videoUrl","endsWith","isVideo","push","warn","catch","e","console","log","error","localStorage","getItem","isManager","on","window","location","reload","deleteVideo","videoId","postResult","success","filter","item","getOptions","width","height","color","title","src","muted","webFullScreen","speedRate","autoPlay","loop","mirror","ligthOff","volume","control","controlBtns","downloadFile","fileUrl","href"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/pages/myvideos/PhoneMyVideosDeep.vue"],"sourcesContent":["<script setup>\nimport {\n  HomeOutlined,\n  PlusOutlined\n} from '@ant-design/icons-vue';\nimport {jumphelper} from \"@/js/jumphelper\";\nimport NewVideoCom from \"@/coms/videos/NewVideoCom.vue\";\nimport {bus} from \"vue3-eventbus\";\nimport {onMounted, ref} from \"vue\";\nimport {deleteVideoApi, selectVideos} from \"@/js/apihelper\";\nimport {message} from \"ant-design-vue\";\nimport {timeCorrect} from \"@/js/jshelper\";\n\nconst newVideoShow = ()=>{\n  bus.emit('newVideoShow')\n  cardShowing.value = true\n}\nconst videoList = ref([])\nconst currentProps = ref({\n  firstIndex: 0,\n  length: 3\n})\nconst pushVideos = ()=>{\n  const getResults = selectVideos(currentProps.value)\n  getResults.then(response=>{\n    if (response.data.length > 0){\n      for (const datum of response.data) {\n        const tmp = datum\n        tmp.time = timeCorrect(datum.time)\n        if (tmp.videoUrl && tmp.videoUrl.endsWith('.mp4') || tmp.videoUrl.endsWith('.avi') || tmp.videoUrl.endsWith('.mov')){\n          tmp.isVideo = true\n        }\n        videoList.value.push(tmp)\n      }\n      currentProps.value.firstIndex += currentProps.value.length\n    }else{\n      message.warn('后面没有了')\n    }\n  }).catch(e=>{\n    console.log(e)\n    message.error('查询视频失败')\n  })\n}\nonMounted(()=>{\n  if (localStorage.getItem('managerSecret') && localStorage.getItem('managerSecret') === 'nzt100years'){\n    isManager.value = true\n  }\n  pushVideos()\n  bus.on('setCardShowingFalse',()=>{\n    window.location.reload();\n  })\n})\nconst deleteVideo = (videoId)=>{\n  const postResult = deleteVideoApi(videoId)\n  postResult.then(response=>{\n    if (response.data){\n      message.success('删除成功')\n      videoList.value = videoList.value.filter(item => item.videoId !== videoId)\n    }else{\n      message.error('删除失败')\n      console.log(response)\n    }\n  }).catch(e=>{\n    message.error('删除失败')\n    console.log(e)\n  })\n}\nconst getOptions = (videoUrl)=>{\n  return {\n    width: \"100%\", //播放器宽度\n    height: \"auto\", //播放器高度\n    color: \"#409eff\", //主题色\n    title: \"\", //视频名称\n    src: videoUrl, //视频源\n    muted: false, //静音\n    webFullScreen: false,\n    speedRate: [\"0.75\", \"1.0\", \"1.25\", \"1.5\", \"2.0\"], //播放倍速\n    autoPlay: false, //自动播放\n    loop: false, //循环播放\n    mirror: false, //镜像画面\n    ligthOff: false, //关灯模式\n    volume: 0.3, //默认音量大小\n    control: true, //是否显示控制\n    controlBtns: [\n      \"audioTrack\",\n      \"quality\",\n      \"speedRate\",\n      \"volume\",\n      \"setting\",\n      \"pip\",\n      \"pageFullScreen\",\n      \"fullScreen\",\n    ], //显示所有按钮,\n  }\n}\nconst downloadFile = (fileUrl)=>{\n  window.location.href = fileUrl\n}\nconst cardShowing = ref(false)\nconst isManager = ref(false)\n\n</script>\n\n<template>\n  <div class=\"videos-background\">\n    <HomeOutlined @click=\"jumphelper.jumpToSelect()\" class=\"home_icon\"/>\n    <h4>- 互联网不是法外之地 -</h4>\n    <div class=\"scroll-container\">\n      <div v-for=\"(item, index) in videoList\" :key=\"index\" class=\"video-line\">\n        <h5>{{ item.time }}</h5>\n        <p>{{ item.videoContent }}</p>\n        <h5 v-if=\"isManager\" class=\"delete-btn\" @click=\"deleteVideo(item.videoId)\">删除</h5>\n        <div v-if=\"item.isVideo\">\n          <vue3VideoPlay\n              v-if=\"!cardShowing\"\n              v-bind=\"getOptions(item.videoUrl)\"\n          />\n        </div>\n        <div v-else>\n          <a-button @click=\"downloadFile(item.videoUrl)\">点击下载文件</a-button>\n        </div>\n      </div>\n      <a-button type=\"text\" @click=\"pushVideos\">- 更多 -</a-button>\n    </div>\n    <div @click=\"newVideoShow\" v-if=\"!cardShowing && isManager\" class=\"add-container\">\n      <PlusOutlined />\n    </div>\n    <NewVideoCom/>\n  </div>\n</template>\n\n<style scoped>\n  .videos-background{\n    background-color: #f5f8ff;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .videos-background h4{\n    font-weight: bold;\n    letter-spacing: 4px;\n    width: 100%;\n    color: #444;\n    text-align: center;\n    height: 46px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    animation: right-fade-in .8s 1;\n  }\n  .scroll-container{\n    flex: 1;\n    width: 100%;\n    background-color: #f6f6f6;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .add-container{\n    position: fixed;\n    right: 16px;\n    bottom: 48px;\n    width: 48px;\n    height: 48px;\n    background-color: #f5f8ff;\n    border: 1px solid #5471c088;\n    border-radius: 24px;\n    font-size: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #5471c0aa;\n    cursor: pointer;\n    z-index: 999;\n  }\n  .video-line{\n    padding: 8px 8px 12px 8px;\n    background-color: #fff;\n    margin-bottom: 4px;\n    position: relative;\n    width: 100%;\n  }\n  .delete-btn{\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    text-decoration: underline;\n    color: #666;\n    cursor: pointer;\n  }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}