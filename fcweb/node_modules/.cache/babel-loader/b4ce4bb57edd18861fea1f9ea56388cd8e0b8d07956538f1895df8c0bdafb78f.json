{"ast":null,"code":"import { CloseOutlined, UploadOutlined } from '@ant-design/icons-vue';\nimport { bus } from \"vue3-eventbus\";\nimport { computed, onMounted, reactive } from \"vue\";\nimport { message } from \"ant-design-vue\";\nimport { changeMeList, getMeList } from \"@/js/apihelper\";\nexport default {\n  __name: 'MeChangeCom',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const closeSelectCard = () => {\n      bus.emit('closeSelectCard');\n    };\n    onMounted(() => {\n      const listResult = getMeList();\n      listResult.then(response => {\n        Object.assign(list, response.data);\n      }).catch(e => {\n        console.log(e);\n        message.error('请求出错');\n      });\n    });\n    const objectKeys = computed(() => Object.keys(list));\n    const list = reactive({});\n    const changeKey = (type, value) => {\n      const changeResult = changeMeList({\n        type: type,\n        value: value\n      });\n      changeResult.then(response => {\n        if (response.data) {\n          message.success('更改成功');\n        } else {\n          message.error('更改失败');\n        }\n      }).catch(e => {\n        console.log(e);\n        message.error('请求出错');\n      });\n    };\n    const handleUploadChange = info => {\n      if (info.file.status === 'done') {\n        message.success(`文件上传成功，photo值已更改`);\n        list.photo = info.file.response;\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 文件上传失败`);\n      }\n    };\n    const __returned__ = {\n      closeSelectCard,\n      objectKeys,\n      list,\n      changeKey,\n      handleUploadChange,\n      get CloseOutlined() {\n        return CloseOutlined;\n      },\n      get UploadOutlined() {\n        return UploadOutlined;\n      },\n      get bus() {\n        return bus;\n      },\n      computed,\n      onMounted,\n      reactive,\n      get message() {\n        return message;\n      },\n      get changeMeList() {\n        return changeMeList;\n      },\n      get getMeList() {\n        return getMeList;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["CloseOutlined","UploadOutlined","bus","computed","onMounted","reactive","message","changeMeList","getMeList","closeSelectCard","emit","listResult","then","response","Object","assign","list","data","catch","e","console","log","error","objectKeys","keys","changeKey","type","value","changeResult","success","handleUploadChange","info","file","status","photo","name"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/coms/manager/MeChangeCom.vue"],"sourcesContent":["<script setup>\nimport {CloseOutlined, UploadOutlined} from '@ant-design/icons-vue'\nimport {bus} from \"vue3-eventbus\";\nimport {computed, onMounted, reactive} from \"vue\";\nimport {message} from \"ant-design-vue\";\nimport {changeMeList, getMeList} from \"@/js/apihelper\";\n\nconst closeSelectCard = ()=>{\n  bus.emit('closeSelectCard')\n}\nonMounted(()=>{\n  const listResult = getMeList()\n  listResult.then(response=>{\n    Object.assign(list, response.data);\n  }).catch(e=>{\n    console.log(e)\n    message.error('请求出错')\n  })\n})\nconst objectKeys = computed(() => Object.keys(list));\nconst list = reactive({})\nconst changeKey = (type, value)=>{\n  const changeResult = changeMeList({\n    type:type,\n    value:value\n  })\n  changeResult.then(response=>{\n    if (response.data){\n      message.success('更改成功')\n    }else{\n      message.error('更改失败')\n    }\n  }).catch(e=>{\n    console.log(e)\n    message.error('请求出错')\n  })\n}\nconst handleUploadChange = (info)=>{\n  if (info.file.status === 'done') {\n    message.success(`文件上传成功，photo值已更改`);\n    list.photo = info.file.response\n  } else if (info.file.status === 'error') {\n    message.error(`${info.file.name} 文件上传失败`);\n  }\n}\n</script>\n\n<template>\n  <div class=\"select_com_background\">\n    <h2>- 修改我的资料 -</h2>\n    <CloseOutlined @click=\"closeSelectCard()\" class=\"card_cancel_btn\" />\n    <div class=\"select_com_card\">\n      <div class=\"select_com_line\" v-for=\"key in objectKeys\" :key=\"key\">\n        <div>\n          <h3>{{ key }}</h3>\n          <a-button @click=\"changeKey(key, list[key])\" type=\"primary\">更改</a-button>\n        </div>\n        <div>\n          <a-input v-model:value=\"list[key]\"></a-input>\n        </div>\n        <a-divider/>\n      </div>\n      <a-upload\n          action=\"https://www.yym-free.com/wz/file/defaultUpLoadFile\"\n          @change=\"handleUploadChange\">\n        <a-button>\n          <upload-outlined></upload-outlined>\n          上传图片\n        </a-button>\n      </a-upload>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.select_com_background{\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: #00000044;\n  animation: fade-in .5s 1;\n}\n.select_com_background h2{\n  position: absolute;\n  top: calc(25vh - 145px);\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  letter-spacing: 6px;\n  font-size: 20px;\n  white-space: nowrap;\n}\n.select_com_card{\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 580px;\n  height: calc(100% - 88px);\n  background: #fff;\n  border-radius: 8px;\n  padding: 16px 12px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n.select_com_line h3{\n  font-weight: bold;\n  margin: 0;\n}\n.select_com_line div:nth-child(1){\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 8px;\n}\n.select_com_line div:nth-child(2){\n\n}\n\n</style>"],"mappings":"AACA,SAAQA,aAAa,EAAEC,cAAc,QAAO,uBAAuB;AACnE,SAAQC,GAAG,QAAO,eAAe;AACjC,SAAQC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,QAAO,KAAK;AACjD,SAAQC,OAAO,QAAO,gBAAgB;AACtC,SAAQC,YAAY,EAAEC,SAAS,QAAO,gBAAgB;;;;;;;IAEtD,MAAMC,eAAe,GAAGA,CAAA,KAAI;MAC1BP,GAAG,CAACQ,IAAI,CAAC,iBAAiB,CAAC;IAC7B,CAAC;IACDN,SAAS,CAAC,MAAI;MACZ,MAAMO,UAAU,GAAGH,SAAS,CAAC,CAAC;MAC9BG,UAAU,CAACC,IAAI,CAACC,QAAQ,IAAE;QACxBC,MAAM,CAACC,MAAM,CAACC,IAAI,EAAEH,QAAQ,CAACI,IAAI,CAAC;MACpC,CAAC,CAAC,CAACC,KAAK,CAACC,CAAC,IAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QACdb,OAAO,CAACgB,KAAK,CAAC,MAAM,CAAC;MACvB,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,MAAMC,UAAU,GAAGpB,QAAQ,CAAC,MAAMW,MAAM,CAACU,IAAI,CAACR,IAAI,CAAC,CAAC;IACpD,MAAMA,IAAI,GAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC;IACzB,MAAMoB,SAAS,GAAGA,CAACC,IAAI,EAAEC,KAAK,KAAG;MAC/B,MAAMC,YAAY,GAAGrB,YAAY,CAAC;QAChCmB,IAAI,EAACA,IAAI;QACTC,KAAK,EAACA;MACR,CAAC,CAAC;MACFC,YAAY,CAAChB,IAAI,CAACC,QAAQ,IAAE;QAC1B,IAAIA,QAAQ,CAACI,IAAI,EAAC;UAChBX,OAAO,CAACuB,OAAO,CAAC,MAAM,CAAC;QACzB,CAAC,MAAI;UACHvB,OAAO,CAACgB,KAAK,CAAC,MAAM,CAAC;QACvB;MACF,CAAC,CAAC,CAACJ,KAAK,CAACC,CAAC,IAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QACdb,OAAO,CAACgB,KAAK,CAAC,MAAM,CAAC;MACvB,CAAC,CAAC;IACJ,CAAC;IACD,MAAMQ,kBAAkB,GAAIC,IAAI,IAAG;MACjC,IAAIA,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,MAAM,EAAE;QAC/B3B,OAAO,CAACuB,OAAO,CAAE,kBAAiB,CAAC;QACnCb,IAAI,CAACkB,KAAK,GAAGH,IAAI,CAACC,IAAI,CAACnB,QAAQ;MACjC,CAAC,MAAM,IAAIkB,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,OAAO,EAAE;QACvC3B,OAAO,CAACgB,KAAK,CAAE,GAAES,IAAI,CAACC,IAAI,CAACG,IAAK,SAAQ,CAAC;MAC3C;IACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}