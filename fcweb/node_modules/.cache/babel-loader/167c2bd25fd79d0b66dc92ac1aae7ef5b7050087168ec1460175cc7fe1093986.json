{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, createBlock as _createBlock, mergeProps as _mergeProps, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-08d178b7\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"videos-background\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"- 我的开源 -\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  ref: \"scrollDiv\",\n  class: \"scroll-container\"\n};\nconst _hoisted_4 = {\n  class: \"left-container\"\n};\nconst _hoisted_5 = {\n  class: \"right-container\"\n};\nconst _hoisted_6 = {\n  style: {\n    \"font-family\": \"清泉\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"a-container\"\n};\nconst _hoisted_8 = [\"href\"];\nconst _hoisted_9 = [\"href\"];\nconst _hoisted_10 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_vue3VideoPlay = _resolveComponent(\"vue3VideoPlay\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"HomeOutlined\"], {\n    style: {\n      \"color\": \"#fff\"\n    },\n    onClick: _cache[0] || (_cache[0] = $event => $setup.jumphelper.jumpToSelect()),\n    class: \"home_icon\"\n  }), _hoisted_2, _createVNode($setup[\"DefaultBackground\"]), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.videoList, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"video-line\"\n    }, [_createElementVNode(\"div\", _hoisted_4, [!$setup.cardShowing ? (_openBlock(), _createBlock(_component_vue3VideoPlay, _normalizeProps(_mergeProps({\n      key: 0\n    }, $setup.getOptions(item.gitVideo))), null, 16 /* FULL_PROPS */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h5\", _hoisted_6, _toDisplayString(item.time), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(item.gitContent), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [item.gitUrl ? (_openBlock(), _createElementBlock(\"a\", {\n      key: 0,\n      href: item.gitUrl\n    }, \"项目地址\", 8 /* PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true), item.runUrl ? (_openBlock(), _createElementBlock(\"a\", {\n      key: 1,\n      href: item.runUrl\n    }, \"运行地址\", 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true)]), $setup.isManager ? (_openBlock(), _createElementBlock(\"h5\", {\n      key: 0,\n      class: \"delete-btn\",\n      onClick: $event => $setup.deleteMG(item.gitId)\n    }, \"删除\", 8 /* PROPS */, _hoisted_10)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createVNode(_component_a_button, {\n    style: {\n      \"color\": \"#fff\",\n      \"font-family\": \"夏风\"\n    },\n    type: \"text\",\n    onClick: $setup.pushVideos\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"- 更多 -\")]),\n    _: 1 /* STABLE */\n  })], 512 /* NEED_PATCH */), !$setup.cardShowing && $setup.isManager ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    onClick: $setup.newVideoShow,\n    class: \"add-container\"\n  }, [_createVNode($setup[\"PlusOutlined\"])])) : _createCommentVNode(\"v-if\", true), _createVNode($setup[\"NewGitCom\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","ref","style","_createElementBlock","_hoisted_1","_createVNode","$setup","onClick","_cache","$event","jumphelper","jumpToSelect","_hoisted_2","_hoisted_3","_Fragment","_renderList","videoList","item","index","key","_hoisted_4","cardShowing","_createBlock","_component_vue3VideoPlay","_normalizeProps","_mergeProps","getOptions","gitVideo","_createCommentVNode","_hoisted_5","_hoisted_6","_toDisplayString","time","gitContent","_hoisted_7","gitUrl","href","_hoisted_8","runUrl","_hoisted_9","isManager","deleteMG","gitId","_hoisted_10","_component_a_button","type","pushVideos","default","_withCtx","_createTextVNode","_","newVideoShow"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/pages/mygit/DesktopMyGit.vue"],"sourcesContent":["<script setup>\nimport {\n  HomeOutlined,\n  PlusOutlined\n} from '@ant-design/icons-vue';\nimport {jumphelper} from \"@/js/jumphelper\";\nimport {bus} from \"vue3-eventbus\";\nimport {onMounted, ref} from \"vue\";\nimport {deleteMyGit, selectMyGit} from \"@/js/apihelper\";\nimport {message} from \"ant-design-vue\";\nimport {timeCorrect} from \"@/js/jshelper\";\nimport NewGitCom from \"@/coms/mygit/NewGitCom.vue\";\nimport DefaultBackground from \"@/coms/all/DefaultBackground.vue\";\n\nconst newVideoShow = ()=>{\n  bus.emit('newVideoShow')\n  cardShowing.value = true\n}\nconst videoList = ref([])\nconst currentProps = ref({\n  firstIndex: 0,\n  length: 3\n})\nconst pushVideos = async () => {\n  try {\n    let scrollElem = scrollDiv.value;\n    var currentTop = scrollElem.scrollTop;\n    const getResults = selectMyGit(currentProps.value);\n    const response = await getResults;\n    if (response.data.length > 0) {\n      console.log(response);\n      for (const datum of response.data) {\n        const tmp = datum;\n        tmp.time = timeCorrect(datum.time);\n        videoList.value.push(tmp);\n      }\n      currentProps.value.firstIndex += currentProps.value.length;\n\n      // 等待数据push完成后再滚动\n      await new Promise(resolve => setTimeout(resolve, 100));\n      scrollElem.scrollTo({ top: currentTop, behavior: 'auto' });\n    } else {\n      message.warn('后面没有了');\n    }\n  } catch (error) {\n    console.log(error);\n    message.error('查询视频失败');\n  }\n};\n\nonMounted(()=>{\n  if (localStorage.getItem('managerSecret') && localStorage.getItem('managerSecret') === 'nzt100years'){\n    isManager.value = true\n  }\n  pushVideos()\n  bus.on('setCardShowingFalse',()=>{\n    window.location.reload();\n  })\n})\nconst deleteMG = (gitId)=>{\n  const postResult = deleteMyGit(gitId)\n  postResult.then(response=>{\n    if (response.data){\n      message.success('删除成功')\n      videoList.value = videoList.value.filter(item => item.gitId !== gitId)\n    }else{\n      message.error('删除失败')\n      console.log(response)\n    }\n  }).catch(e=>{\n    message.error('删除失败')\n    console.log(e)\n  })\n}\nconst getOptions = (videoUrl)=>{\n  return {\n    width: \"100%\", //播放器宽度\n    height: \"auto\", //播放器高度\n    color: \"#409eff\", //主题色\n    title: \"\", //视频名称\n    src: videoUrl, //视频源\n    muted: false, //静音\n    webFullScreen: false,\n    speedRate: [\"0.75\", \"1.0\", \"1.25\", \"1.5\", \"2.0\"], //播放倍速\n    autoPlay: false, //自动播放\n    loop: false, //循环播放\n    mirror: false, //镜像画面\n    ligthOff: false, //关灯模式\n    volume: 0.3, //默认音量大小\n    control: true, //是否显示控制\n    controlBtns: [\n      \"audioTrack\",\n      \"quality\",\n      \"speedRate\",\n      \"volume\",\n      \"setting\",\n      \"pip\",\n      \"pageFullScreen\",\n      \"fullScreen\",\n    ], //显示所有按钮,\n  }\n}\n/*const downloadFile = (fileUrl)=>{\n  window.location.href = fileUrl\n}*/\nconst cardShowing = ref(false)\nconst isManager = ref(false)\nconst scrollDiv = ref()\n\n</script>\n\n<template>\n  <div class=\"videos-background\">\n    <HomeOutlined style=\"color: #fff\" @click=\"jumphelper.jumpToSelect()\" class=\"home_icon\"/>\n    <h4>- 我的开源 -</h4>\n    <DefaultBackground/>\n    <div ref=\"scrollDiv\" class=\"scroll-container\">\n      <div v-for=\"(item, index) in videoList\" :key=\"index\" class=\"video-line\">\n        <div class=\"left-container\">\n          <vue3VideoPlay\n              v-if=\"!cardShowing\"\n              v-bind=\"getOptions(item.gitVideo)\"\n          />\n        </div>\n        <div class=\"right-container\">\n          <h5 style=\"font-family: 清泉\">{{ item.time }}</h5>\n          <p>{{ item.gitContent }}</p>\n          <div class=\"a-container\">\n            <a v-if=\"item.gitUrl\" :href=\"item.gitUrl\">项目地址</a>\n            <a v-if=\"item.runUrl\" :href=\"item.runUrl\">运行地址</a>\n          </div>\n          <h5 class=\"delete-btn\" @click=\"deleteMG(item.gitId)\" v-if=\"isManager\">删除</h5>\n        </div>\n      </div>\n      <a-button style=\"color: #fff; font-family: 夏风;\" type=\"text\" @click=\"pushVideos\">- 更多 -</a-button>\n    </div>\n    <div @click=\"newVideoShow\" v-if=\"!cardShowing && isManager\" class=\"add-container\">\n      <PlusOutlined />\n    </div>\n    <NewGitCom/>\n  </div>\n</template>\n\n<style scoped>\n.videos-background{\n  background-color: transparent;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n}\n.videos-background h4{\n  font-weight: bold;\n  letter-spacing: 4px;\n  width: 100%;\n  color: #fff;\n  z-index: 9;\n  text-align: center;\n  height: 42px;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: right-fade-in .8s 1;\n  font-family: 夏风;\n}\n.scroll-container{\n  flex: 1;\n  width: 100%;\n  background-color: #f6f6f6;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.add-container{\n  position: fixed;\n  right: 16px;\n  bottom: 48px;\n  width: 48px;\n  height: 48px;\n  background-color: #f5f8ff;\n  border: 1px solid #5471c088;\n  border-radius: 24px;\n  font-size: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #5471c0aa;\n  cursor: pointer;\n  z-index: 999;\n}\n.video-line{\n  padding: 8px 8px 12px 8px;\n  background: #ffffffaa;\n  border-radius: 8px;\n  margin-bottom: 12px;\n  position: relative;\n  margin-left: 12px;\n  white-space: pre-line;\n  display: flex;\n  justify-content: space-around;\n  backdrop-filter: blur(4px);\n}\n.left-container{\n  flex: 1;\n  padding: 12px;\n}\n.right-container{\n  width: 360px;\n  padding: 12px;\n}\n.delete-btn{\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  text-decoration: underline;\n  color: #666;\n  cursor: pointer;\n}\n.a-container{\n  margin: -8px 0 8px;\n  font-family: 夏风;\n}\n.a-container a{\n  margin-right: 12px;\n  color: #5471c0;\n}\n.a-container a:visited{\n  color: #272396;\n}\n</style>"],"mappings":";;;EAgHOA,KAAK,EAAC;AAAmB;gEAE5BC,mBAAA,CAAiB,YAAb,UAAQ;;EAEPC,GAAG,EAAC,WAAW;EAACF,KAAK,EAAC;;;EAElBA,KAAK,EAAC;AAAgB;;EAMtBA,KAAK,EAAC;AAAiB;;EACtBG,KAAuB,EAAvB;IAAA;EAAA;AAAuB;;EAEtBH,KAAK,EAAC;AAAa;mBA/HlC;mBAAA;oBAAA;;;;uBAgHEI,mBAAA,CA4BM,OA5BNC,UA4BM,GA3BJC,YAAA,CAAwFC,MAAA;IAA1EJ,KAAmB,EAAnB;MAAA;IAAA,CAAmB;IAAEK,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,UAAU,CAACC,YAAY;IAAIZ,KAAK,EAAC;MAC3Ea,UAAiB,EACjBP,YAAA,CAAoBC,MAAA,wBACpBN,mBAAA,CAmBM,OAnBNa,UAmBM,I,kBAlBJV,mBAAA,CAgBMW,SAAA,QArIZC,WAAA,CAqHmCT,MAAA,CAAAU,SAAS,EArH5C,CAqHmBC,IAAI,EAAEC,KAAK;yBAAxBf,mBAAA,CAgBM;MAhBmCgB,GAAG,EAAED,KAAK;MAAEnB,KAAK,EAAC;QACzDC,mBAAA,CAKM,OALNoB,UAKM,G,CAHOd,MAAA,CAAAe,WAAW,I,cADtBC,YAAA,CAGEC,wBAAA,EA1HZC,eAAA,CAAAC,WAAA;MAAAN,GAAA;IAAA,GAyHsBb,MAAA,CAAAoB,UAAU,CAACT,IAAI,CAACU,QAAQ,mCAzH9CC,mBAAA,e,GA4HQ5B,mBAAA,CAQM,OARN6B,UAQM,GAPJ7B,mBAAA,CAAgD,MAAhD8B,UAAgD,EAAAC,gBAAA,CAAjBd,IAAI,CAACe,IAAI,kBACxChC,mBAAA,CAA4B,WAAA+B,gBAAA,CAAtBd,IAAI,CAACgB,UAAU,kBACrBjC,mBAAA,CAGM,OAHNkC,UAGM,GAFKjB,IAAI,CAACkB,MAAM,I,cAApBhC,mBAAA,CAAkD;MAhI9DgB,GAAA;MAgImCiB,IAAI,EAAEnB,IAAI,CAACkB;OAAQ,MAAI,iBAhI1DE,UAAA,KAAAT,mBAAA,gBAiIqBX,IAAI,CAACqB,MAAM,I,cAApBnC,mBAAA,CAAkD;MAjI9DgB,GAAA;MAiImCiB,IAAI,EAAEnB,IAAI,CAACqB;OAAQ,MAAI,iBAjI1DC,UAAA,KAAAX,mBAAA,e,GAmIqEtB,MAAA,CAAAkC,SAAS,I,cAApErC,mBAAA,CAA6E;MAnIvFgB,GAAA;MAmIcpB,KAAK,EAAC,YAAY;MAAEQ,OAAK,EAAAE,MAAA,IAAEH,MAAA,CAAAmC,QAAQ,CAACxB,IAAI,CAACyB,KAAK;OAAoB,IAAE,iBAnIlFC,WAAA,KAAAf,mBAAA,e;kCAsIMvB,YAAA,CAAiGuC,mBAAA;IAAvF1C,KAAqC,EAArC;MAAA;MAAA;IAAA,CAAqC;IAAC2C,IAAI,EAAC,MAAM;IAAEtC,OAAK,EAAED,MAAA,CAAAwC;;IAtI1EC,OAAA,EAAAC,QAAA,CAsIsF,MAAM,CAtI5FC,gBAAA,CAsIsF,QAAM,E;IAtI5FC,CAAA;+BAwIsC5C,MAAA,CAAAe,WAAW,IAAIf,MAAA,CAAAkC,SAAS,I,cAA1DrC,mBAAA,CAEM;IA1IVgB,GAAA;IAwIUZ,OAAK,EAAED,MAAA,CAAA6C,YAAY;IAAmCpD,KAAK,EAAC;MAChEM,YAAA,CAAgBC,MAAA,kB,KAzItBsB,mBAAA,gBA2IIvB,YAAA,CAAYC,MAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}