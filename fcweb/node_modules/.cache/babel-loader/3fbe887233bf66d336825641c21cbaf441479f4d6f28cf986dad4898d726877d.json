{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, createBlock as _createBlock, mergeProps as _mergeProps, createTextVNode as _createTextVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2463c257\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"videos-background\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"- 互联网不是法外之地 -\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"scroll-container\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  key: 2\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_vue3VideoPlay = _resolveComponent(\"vue3VideoPlay\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"HomeOutlined\"], {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.jumphelper.jumpToSelect()),\n    class: \"home_icon\"\n  }), _hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.videoList, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"video-line\"\n    }, [_createElementVNode(\"h5\", null, _toDisplayString(item.time), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(item.videoContent), 1 /* TEXT */), $setup.isManager ? (_openBlock(), _createElementBlock(\"h5\", {\n      key: 0,\n      class: \"delete-btn\",\n      onClick: $event => $setup.deleteVideo(item.videoId)\n    }, \"删除\", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), item.isVideo ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [!$setup.cardShowing ? (_openBlock(), _createBlock(_component_vue3VideoPlay, _normalizeProps(_mergeProps({\n      key: 0\n    }, $setup.getOptions(item.videoUrl))), null, 16 /* FULL_PROPS */)) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_a_button, {\n      onClick: $event => $setup.downloadFile(item.videoUrl)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"点击下载文件\")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]))]);\n  }), 128 /* KEYED_FRAGMENT */)), _createVNode(_component_a_button, {\n    type: \"text\",\n    onClick: $setup.pushVideos\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"- 更多 -\")]),\n    _: 1 /* STABLE */\n  })]), !$setup.cardShowing && $setup.isManager ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    onClick: $setup.newVideoShow,\n    class: \"add-container\"\n  }, [_createVNode($setup[\"PlusOutlined\"])])) : _createCommentVNode(\"v-if\", true), _createVNode($setup[\"NewVideoCom\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createElementBlock","_hoisted_1","_createVNode","$setup","onClick","_cache","$event","jumphelper","jumpToSelect","_hoisted_2","_hoisted_3","_Fragment","_renderList","videoList","item","index","_toDisplayString","time","videoContent","isManager","deleteVideo","videoId","_hoisted_4","_createCommentVNode","isVideo","_hoisted_5","cardShowing","_createBlock","_component_vue3VideoPlay","_normalizeProps","_mergeProps","getOptions","videoUrl","_hoisted_6","_component_a_button","downloadFile","default","_withCtx","_createTextVNode","_","type","pushVideos","newVideoShow"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/pages/myvideos/PhoneMyVideosDeep.vue"],"sourcesContent":["<script setup>\nimport {\n  HomeOutlined,\n  PlusOutlined\n} from '@ant-design/icons-vue';\nimport {jumphelper} from \"@/js/jumphelper\";\nimport NewVideoCom from \"@/coms/videos/NewVideoCom.vue\";\nimport {bus} from \"vue3-eventbus\";\nimport {onMounted, ref} from \"vue\";\nimport {deleteVideoApi, selectVideos} from \"@/js/apihelper\";\nimport {message} from \"ant-design-vue\";\nimport {timeCorrect} from \"@/js/jshelper\";\n\nconst newVideoShow = ()=>{\n  bus.emit('newVideoShow')\n  cardShowing.value = true\n}\nconst videoList = ref([])\nconst currentProps = ref({\n  firstIndex: 0,\n  length: 3\n})\nconst pushVideos = ()=>{\n  const getResults = selectVideos(currentProps.value)\n  getResults.then(response=>{\n    if (response.data.length > 0){\n      for (const datum of response.data) {\n        const tmp = datum\n        tmp.time = timeCorrect(datum.time)\n        if (tmp.videoUrl && tmp.videoUrl.endsWith('.mp4') || tmp.videoUrl.endsWith('.avi') || tmp.videoUrl.endsWith('.mov')){\n          tmp.isVideo = true\n        }\n        videoList.value.push(tmp)\n      }\n      currentProps.value.firstIndex += currentProps.value.length\n    }else{\n      message.warn('后面没有了')\n    }\n  }).catch(e=>{\n    console.log(e)\n    message.error('查询视频失败')\n  })\n}\nonMounted(()=>{\n  if (localStorage.getItem('managerSecret') && localStorage.getItem('managerSecret') === 'nzt100years'){\n    isManager.value = true\n  }\n  pushVideos()\n  bus.on('setCardShowingFalse',()=>{\n    window.location.reload();\n  })\n})\nconst deleteVideo = (videoId)=>{\n  const postResult = deleteVideoApi(videoId)\n  postResult.then(response=>{\n    if (response.data){\n      message.success('删除成功')\n      videoList.value = videoList.value.filter(item => item.videoId !== videoId)\n    }else{\n      message.error('删除失败')\n      console.log(response)\n    }\n  }).catch(e=>{\n    message.error('删除失败')\n    console.log(e)\n  })\n}\nconst getOptions = (videoUrl)=>{\n  return {\n    width: \"100%\", //播放器宽度\n    height: \"auto\", //播放器高度\n    color: \"#409eff\", //主题色\n    title: \"\", //视频名称\n    src: videoUrl, //视频源\n    muted: false, //静音\n    webFullScreen: false,\n    speedRate: [\"0.75\", \"1.0\", \"1.25\", \"1.5\", \"2.0\"], //播放倍速\n    autoPlay: false, //自动播放\n    loop: false, //循环播放\n    mirror: false, //镜像画面\n    ligthOff: false, //关灯模式\n    volume: 0.3, //默认音量大小\n    control: true, //是否显示控制\n    controlBtns: [\n      \"audioTrack\",\n      \"quality\",\n      \"speedRate\",\n      \"volume\",\n      \"setting\",\n      \"pip\",\n      \"pageFullScreen\",\n      \"fullScreen\",\n    ], //显示所有按钮,\n  }\n}\nconst downloadFile = (fileUrl)=>{\n  window.location.href = fileUrl\n}\nconst cardShowing = ref(false)\nconst isManager = ref(false)\n\n</script>\n\n<template>\n  <div class=\"videos-background\">\n    <HomeOutlined @click=\"jumphelper.jumpToSelect()\" class=\"home_icon\"/>\n    <h4>- 互联网不是法外之地 -</h4>\n    <div class=\"scroll-container\">\n      <div v-for=\"(item, index) in videoList\" :key=\"index\" class=\"video-line\">\n        <h5>{{ item.time }}</h5>\n        <p>{{ item.videoContent }}</p>\n        <h5 v-if=\"isManager\" class=\"delete-btn\" @click=\"deleteVideo(item.videoId)\">删除</h5>\n        <div v-if=\"item.isVideo\">\n          <vue3VideoPlay\n              v-if=\"!cardShowing\"\n              v-bind=\"getOptions(item.videoUrl)\"\n          />\n        </div>\n        <div v-else>\n          <a-button @click=\"downloadFile(item.videoUrl)\">点击下载文件</a-button>\n        </div>\n      </div>\n      <a-button type=\"text\" @click=\"pushVideos\">- 更多 -</a-button>\n    </div>\n    <div @click=\"newVideoShow\" v-if=\"!cardShowing && isManager\" class=\"add-container\">\n      <PlusOutlined />\n    </div>\n    <NewVideoCom/>\n  </div>\n</template>\n\n<style scoped>\n  .videos-background{\n    background-color: #f5f8ff;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .videos-background h4{\n    font-weight: bold;\n    letter-spacing: 4px;\n    width: 100%;\n    color: #444;\n    text-align: center;\n    height: 46px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    animation: right-fade-in .8s 1;\n  }\n  .scroll-container{\n    flex: 1;\n    width: 100%;\n    background-color: #f6f6f6;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .add-container{\n    position: fixed;\n    right: 16px;\n    bottom: 48px;\n    width: 48px;\n    height: 48px;\n    background-color: #f5f8ff;\n    border: 1px solid #5471c088;\n    border-radius: 24px;\n    font-size: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #5471c0aa;\n    cursor: pointer;\n    z-index: 999;\n  }\n  .video-line{\n    padding: 8px 8px 12px 8px;\n    background-color: #fff;\n    margin-bottom: 4px;\n    position: relative;\n    width: 100%;\n  }\n  .delete-btn{\n    position: absolute;\n    right: 8px;\n    top: 8px;\n    text-decoration: underline;\n    color: #666;\n    cursor: pointer;\n  }\n</style>"],"mappings":";;;EAwGOA,KAAK,EAAC;AAAmB;gEAE5BC,mBAAA,CAAsB,YAAlB,eAAa;;EACZD,KAAK,EAAC;AAAkB;mBA3GjC;;EAAAE,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;;uBAwGEC,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBJC,YAAA,CAAoEC,MAAA;IAArDC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEH,MAAA,CAAAI,UAAU,CAACC,YAAY;IAAIX,KAAK,EAAC;MACvDY,UAAsB,EACtBX,mBAAA,CAgBM,OAhBNY,UAgBM,I,kBAfJV,mBAAA,CAaMW,SAAA,QAzHZC,WAAA,CA4GmCT,MAAA,CAAAU,SAAS,EA5G5C,CA4GmBC,IAAI,EAAEC,KAAK;yBAAxBf,mBAAA,CAaM;MAbmCD,GAAG,EAAEgB,KAAK;MAAElB,KAAK,EAAC;QACzDC,mBAAA,CAAwB,YAAAkB,gBAAA,CAAjBF,IAAI,CAACG,IAAI,kBAChBnB,mBAAA,CAA8B,WAAAkB,gBAAA,CAAxBF,IAAI,CAACI,YAAY,kBACbf,MAAA,CAAAgB,SAAS,I,cAAnBnB,mBAAA,CAAkF;MA/G1FD,GAAA;MA+G6BF,KAAK,EAAC,YAAY;MAAEO,OAAK,EAAAE,MAAA,IAAEH,MAAA,CAAAiB,WAAW,CAACN,IAAI,CAACO,OAAO;OAAG,IAAE,iBA/GrFC,UAAA,KAAAC,mBAAA,gBAgHmBT,IAAI,CAACU,OAAO,I,cAAvBxB,mBAAA,CAKM,OArHdyB,UAAA,G,CAkHqBtB,MAAA,CAAAuB,WAAW,I,cADtBC,YAAA,CAGEC,wBAAA,EApHZC,eAAA,CAAAC,WAAA;MAAA/B,GAAA;IAAA,GAmHsBI,MAAA,CAAA4B,UAAU,CAACjB,IAAI,CAACkB,QAAQ,mCAnH9CT,mBAAA,e,oBAsHQvB,mBAAA,CAEM,OAxHdiC,UAAA,GAuHU/B,YAAA,CAAgEgC,mBAAA;MAArD9B,OAAK,EAAAE,MAAA,IAAEH,MAAA,CAAAgC,YAAY,CAACrB,IAAI,CAACkB,QAAQ;;MAvHtDI,OAAA,EAAAC,QAAA,CAuHyD,MAAM,CAvH/DC,gBAAA,CAuHyD,QAAM,E;MAvH/DC,CAAA;;kCA0HMrC,YAAA,CAA2DgC,mBAAA;IAAjDM,IAAI,EAAC,MAAM;IAAEpC,OAAK,EAAED,MAAA,CAAAsC;;IA1HpCL,OAAA,EAAAC,QAAA,CA0HgD,MAAM,CA1HtDC,gBAAA,CA0HgD,QAAM,E;IA1HtDC,CAAA;SA4HsCpC,MAAA,CAAAuB,WAAW,IAAIvB,MAAA,CAAAgB,SAAS,I,cAA1DnB,mBAAA,CAEM;IA9HVD,GAAA;IA4HUK,OAAK,EAAED,MAAA,CAAAuC,YAAY;IAAmC7C,KAAK,EAAC;MAChEK,YAAA,CAAgBC,MAAA,kB,KA7HtBoB,mBAAA,gBA+HIrB,YAAA,CAAcC,MAAA,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}