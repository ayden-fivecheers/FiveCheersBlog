{"ast":null,"code":"import { CloseOutlined, UploadOutlined } from '@ant-design/icons-vue';\nimport { bus } from \"vue3-eventbus\";\nimport { message } from \"ant-design-vue\";\nimport { ref } from \"vue\";\nimport { insertSpaceApi } from \"@/js/apihelper\";\nexport default {\n  __name: 'SpaceInsertCom',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const closeSelectCard = () => {\n      bus.emit('closeSelectCard');\n    };\n    const newSpace = ref({\n      spaceContent: null,\n      spaceImgs: '',\n      spaceFiles: ''\n    });\n    const handleImgUploadChange = info => {\n      if (info.file.status === 'done') {\n        message.success(`文件上传成功，imgs值已更改`);\n        newSpace.value.spaceImgs += info.file.response + ',';\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 文件上传失败`);\n      }\n    };\n    const handleFileUploadChange = info => {\n      if (info.file.status === 'done') {\n        message.success(`文件上传成功，files值已更改`);\n        newSpace.value.spaceFiles += info.file.response + ',';\n      } else if (info.file.status === 'error') {\n        message.error(`${info.file.name} 文件上传失败`);\n      }\n    };\n    const insertFuc = () => {\n      const postResult = insertSpaceApi(newSpace.value);\n      postResult.then(response => {\n        if (response.data) {\n          message.success('上传成功');\n        } else {\n          message.error('上传失败');\n        }\n      }).catch(e => {\n        console.log(e);\n        message.error('响应错误');\n      });\n    };\n    const __returned__ = {\n      closeSelectCard,\n      newSpace,\n      handleImgUploadChange,\n      handleFileUploadChange,\n      insertFuc,\n      get CloseOutlined() {\n        return CloseOutlined;\n      },\n      get UploadOutlined() {\n        return UploadOutlined;\n      },\n      get bus() {\n        return bus;\n      },\n      get message() {\n        return message;\n      },\n      ref,\n      get insertSpaceApi() {\n        return insertSpaceApi;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["CloseOutlined","UploadOutlined","bus","message","ref","insertSpaceApi","closeSelectCard","emit","newSpace","spaceContent","spaceImgs","spaceFiles","handleImgUploadChange","info","file","status","success","value","response","error","name","handleFileUploadChange","insertFuc","postResult","then","data","catch","e","console","log"],"sources":["/Users/ayden/Desktop/FiveCheersBlog/fcweb/src/coms/manager/SpaceInsertCom.vue"],"sourcesContent":["<script setup>\nimport {CloseOutlined, UploadOutlined} from '@ant-design/icons-vue'\nimport {bus} from \"vue3-eventbus\";\nimport {message} from \"ant-design-vue\";\nimport {ref} from \"vue\";\nimport {insertSpaceApi} from \"@/js/apihelper\";\n\nconst closeSelectCard = ()=>{\n  bus.emit('closeSelectCard')\n}\nconst newSpace = ref({\n  spaceContent: null,\n  spaceImgs: '',\n  spaceFiles: ''\n})\nconst handleImgUploadChange = (info)=>{\n  if (info.file.status === 'done') {\n    message.success(`文件上传成功，imgs值已更改`);\n    newSpace.value.spaceImgs += info.file.response + ','\n  } else if (info.file.status === 'error') {\n    message.error(`${info.file.name} 文件上传失败`);\n  }\n}\nconst handleFileUploadChange = (info)=>{\n  if (info.file.status === 'done') {\n    message.success(`文件上传成功，files值已更改`);\n    newSpace.value.spaceFiles += info.file.response + ','\n  } else if (info.file.status === 'error') {\n    message.error(`${info.file.name} 文件上传失败`);\n  }\n}\n\nconst insertFuc = ()=>{\n  const postResult = insertSpaceApi(newSpace.value)\n  postResult.then(response=>{\n    if (response.data){\n      message.success('上传成功')\n    }else{\n      message.error('上传失败')\n    }\n  }).catch(e=>{\n    console.log(e)\n    message.error('响应错误')\n  })\n}\n</script>\n\n<template>\n  <div class=\"select_com_background\">\n    <CloseOutlined @click=\"closeSelectCard()\" class=\"card_cancel_btn\" />\n    <h2>- 发布说说 -</h2>\n    <div class=\"select_com_card\">\n      <div>\n        <h3>内容</h3>\n        <a-textarea :auto-size=\"{ minRows: 2, maxRows: 99 }\" v-model:value=\"newSpace.spaceContent\"/>\n      </div>\n      <a-divider/>\n      <div>\n        <h3>图片</h3>\n        <a-upload\n            action=\"https://www.yym-free.com/wz/file/defaultUpLoadFile\"\n            @change=\"handleImgUploadChange\">\n          <a-button style=\"margin-top: 8px\">\n            <upload-outlined></upload-outlined>\n            上传图片\n          </a-button>\n        </a-upload>\n      </div>\n      <a-divider/>\n      <div>\n        <h3>文件</h3>\n        <a-upload\n            action=\"https://www.yym-free.com/wz/file/defaultUpLoadFile\"\n            @change=\"handleFileUploadChange\">\n          <a-button style=\"margin-top: 8px\">\n            <upload-outlined></upload-outlined>\n            上传文件\n          </a-button>\n        </a-upload>\n      </div>\n      <a-divider/>\n      <a-button @click=\"insertFuc\" class=\"sure_btn\" type=\"primary\" size=\"large\">确定</a-button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.select_com_background{\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: #00000044;\n  animation: fade-in .5s 1;\n}\n.select_com_background h2{\n  position: absolute;\n  top: calc(25vh - 145px);\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  letter-spacing: 6px;\n  font-size: 20px;\n  white-space: nowrap;\n}\n.select_com_card{\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 580px;\n  height: calc(100% - 88px);\n  background: #fff;\n  border-radius: 8px;\n  padding: 16px 12px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n.select_com_line h3{\n  font-weight: bold;\n}\n.select_com_card div{\n  margin: 12px 8px;\n}\n.sure_btn{\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 160px;\n  margin-top: 12px;\n}\n</style>"],"mappings":"AACA,SAAQA,aAAa,EAAEC,cAAc,QAAO,uBAAuB;AACnE,SAAQC,GAAG,QAAO,eAAe;AACjC,SAAQC,OAAO,QAAO,gBAAgB;AACtC,SAAQC,GAAG,QAAO,KAAK;AACvB,SAAQC,cAAc,QAAO,gBAAgB;;;;;;;IAE7C,MAAMC,eAAe,GAAGA,CAAA,KAAI;MAC1BJ,GAAG,CAACK,IAAI,CAAC,iBAAiB,CAAC;IAC7B,CAAC;IACD,MAAMC,QAAQ,GAAGJ,GAAG,CAAC;MACnBK,YAAY,EAAE,IAAI;MAClBC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE;IACd,CAAC,CAAC;IACF,MAAMC,qBAAqB,GAAIC,IAAI,IAAG;MACpC,IAAIA,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,MAAM,EAAE;QAC/BZ,OAAO,CAACa,OAAO,CAAE,iBAAgB,CAAC;QAClCR,QAAQ,CAACS,KAAK,CAACP,SAAS,IAAIG,IAAI,CAACC,IAAI,CAACI,QAAQ,GAAG,GAAG;MACtD,CAAC,MAAM,IAAIL,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,OAAO,EAAE;QACvCZ,OAAO,CAACgB,KAAK,CAAE,GAAEN,IAAI,CAACC,IAAI,CAACM,IAAK,SAAQ,CAAC;MAC3C;IACF,CAAC;IACD,MAAMC,sBAAsB,GAAIR,IAAI,IAAG;MACrC,IAAIA,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,MAAM,EAAE;QAC/BZ,OAAO,CAACa,OAAO,CAAE,kBAAiB,CAAC;QACnCR,QAAQ,CAACS,KAAK,CAACN,UAAU,IAAIE,IAAI,CAACC,IAAI,CAACI,QAAQ,GAAG,GAAG;MACvD,CAAC,MAAM,IAAIL,IAAI,CAACC,IAAI,CAACC,MAAM,KAAK,OAAO,EAAE;QACvCZ,OAAO,CAACgB,KAAK,CAAE,GAAEN,IAAI,CAACC,IAAI,CAACM,IAAK,SAAQ,CAAC;MAC3C;IACF,CAAC;IAED,MAAME,SAAS,GAAGA,CAAA,KAAI;MACpB,MAAMC,UAAU,GAAGlB,cAAc,CAACG,QAAQ,CAACS,KAAK,CAAC;MACjDM,UAAU,CAACC,IAAI,CAACN,QAAQ,IAAE;QACxB,IAAIA,QAAQ,CAACO,IAAI,EAAC;UAChBtB,OAAO,CAACa,OAAO,CAAC,MAAM,CAAC;QACzB,CAAC,MAAI;UACHb,OAAO,CAACgB,KAAK,CAAC,MAAM,CAAC;QACvB;MACF,CAAC,CAAC,CAACO,KAAK,CAACC,CAAC,IAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QACdxB,OAAO,CAACgB,KAAK,CAAC,MAAM,CAAC;MACvB,CAAC,CAAC;IACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}